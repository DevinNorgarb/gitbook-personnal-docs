# Merge branch 'slave\_raw'@7a45f7f

@@ -200,8 +200,8 @@ Command|Description \`help\`|List available commands (or detailed help with "help cmd"). \`port\`|Print the used TCP/IP port, or the used device, or the serial COM port, or the serial pseudo-tty, depending on the selected interface. \`test\`|Test the OBD-II request specified in the argument. Check also "verify" and "write". The autocompletion (by pressing or double-pressing TAB) allows prompting all defined OBD-II requests (PIDs). \`write\`|Write the formatted XML response specified in the argument to the connected application. (Use "verify" to avoid the write operation.) \`verify\`|Test the processing of the formatted XML response specified in the argument (like "write", but without writing to the application). \`write\`|Write the formatted XML response specified in the argument to the connected application. The ASCII null character is represented as \`\x00\` (Use "verify" to avoid the write operation.) \`verify\`|Test the processing of the formatted XML response specified in the argument (like "write", but without writing to the application). The ASCII null character is represented as \`\x00\`. \`loglevel\`|If an argument is given, set the logging level, otherwise show the current one. Valid numbers or words: CRITICAL=50, ERROR=40, WARNING=30, INFO=20, DEBUG=10. The autocompletion (by pressing or double-pressing TAB) allows prompting all available values. \`quit\`|quit the program (or end-of-file/Control-D, or break/Control-C) \`counters\`|print the number of each executed PIDs (upper case names), the values associated to some 'AT' PIDs (\*cmd\_...\*), the unknown requests, the emulator response delay, the total number of executed commands (\*commands\*) and the current scenario (\*scenario\*). The related dictionary is \`emulator.counters\`.@@ -220,7 +220,7 @@ Command|Description \`color\`|toggle usage of colors off/on \`history \[\<n>]\`|print the last 20 items of the command history; if an argument is given, print the last n items in the history; with argument \*clear\*, clear the history. The command history is permanently saved to file \*.ELM327\_emulator\_history\* within the home directory. \`merge \<module>\`|import a scenario from an external module and merges it with the emulator configuration. \`\<module>\` shall be a Python file including the \`ObdMessage\` dictionary (e.g., generated by \*obd\_dictionary\*) without \*.py\* extension (notice that the physical file shall be in the current directory and shall end with \*.py\*). The autocompletion allows prompting all compatible files in the current directory (type \*merge\*, then press space, then press TAB). After a successful merge, the new scenario can be activated through the \*scenario\* command. \`version\`|Print ELM327-emulator version. With an argument, set the ELM version. If the argument is 'hexheader' followed by a sequence of hex digits, the header of the ELM version is updated with the sequence. If the argument is 'reset', header and ELM version strings are set to default values. The autocompletion can be used with this command. \`version\`|Print ELM327-emulator version. With an argument, set the ELM version. If the argument is \`hexheader\` followed by a sequence of hex digits, the header of the ELM version is updated with the sequence. If the argument is \`reset\`, header and ELM version strings are set to default values. The autocompletion can be used with this command. \`commands\`|List the description of each available command. \`choice\`|Print or select the adopted method to choose the return value of answers that are expressed as a list of data. Possible values are "sequential" (the returned value follows the list sequence, which is the default mode) or "random" (the returned value is randomly selected within the values in the list). Optional list of weights can be added; decimals are allowed; the default value is 1. Autocompletion is allowed for this command.\
@@ -425,6 +425,30 @@ version reset\
Without parameters, \`version\` returns the \*ELM327-emulator\* version and ELM version parameters in use.\
Other example to reproduce the ATZ output of a ScanTool.net OBDLink SX device:\
\`\`\` version hexheader 00 00 00 00 0d 0d version ELM327 v1.4b test atz \`\`\`\
The returned output is:\
\`\`\` \_\_\_\_\_\_Raw command:\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ '\<writeln>\x00\x00\x00\x00\r\rELM327 v1.4b\</writeln>' \_\_\_\_\_\_Command output:\_\_\_\_\_\_\_\_\_\_\_\_ '\x00\x00\x00\x00\r\rELM327 v1.4b\r\r>' \`\`\`\
The output is then written to the application when using the following command:\
\`\`\` write \<writeln>\x00\x00\x00\x00\r\rELM327 v1.4b\</writeln> \`\`\`\
\## Editing answers on the fly\
Static answers in the \`ObdMessage\` dictionary can be edited on the fly through the \`edit\` command. It extracts the answer from a PID, stores it into the \`emulator.answer\` dictionary described in the next chapter and performs the editing in its data part. If the command is called with just the PID argument, it resets the \`emulator.answer\` dictionary for the referred PID, returning to the default answer.@@ -1186,6 +1210,8 @@ It is possible to add marks in the log file via commands like \`logging.info("my\
To totally disable logging for all handlers: \`logging.disable(logging.CRITICAL)\`. To restore logging: \`logging.disable(0)\`.\
To browse the log files, \[lnav]\(https://github.com/tstack/lnav) is suggested.\
Command to count the number of different PIDs (OBD Commands) used by the client (excluding AT Commands): \`\`\`python reduce(lambda x, key: x + (1 if re.match('^\[A-Z]', key) and not key.startswith('AT\_') and emulator.counters\[key] > 0 else 0), emulator.counters, 0)
